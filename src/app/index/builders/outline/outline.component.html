<nz-space nzAlign="center">
  <nz-input-group *nzSpaceItem [nzPrefix]="suffixIconSearch" style="width: 180px">
    <input type="text" nz-input placeholder="搜索" [(ngModel)]="searchText" />
    <ng-template #suffixIconSearch>
      <span nz-icon nzType="search"></span>
    </ng-template>
  </nz-input-group>

  <nz-button-group *nzSpaceItem>
    <button nz-button nzType="text" nz-tooltip="刷新" (click)="getData()">
      <span nz-icon nzType="reload"></span>
    </button>
    <button nz-button nzType="text" nz-tooltip="新增" (click)="openForm()">
      <span nz-icon nzType="plus-circle" nzTheme="outline"></span>
    </button>
  </nz-button-group>
</nz-space>

<nz-divider style="margin: 8px 0"></nz-divider>

<nz-tree
  nzBlockNode
  nzDraggable
  [nzData]="nodes"
  [nzSearchValue]="searchText"
  [nzShowExpand]="false"
  [nzTreeTemplate]="treeTpl"
  (nzClick)="activeNode($event)"
  (nzDblClick)="openFolder($event)"
  (nzContextMenu)="openContextMenu($event, menu)"
>
  <ng-template #treeTpl let-node let-origin="origin">
    <nz-row class="custom-node" nzAlign="middle" nzJustify="space-between">
      <nz-col>
        <ng-container *ngIf="!node.isLeaf; else notLeaf">
          <span nz-icon [nzType]="node.isExpanded ? 'folder-open' : 'folder'" (click)="openFolder(node)"></span>
        </ng-container>
        <ng-template #notLeaf>
          <span nz-icon nzType="file"></span>
        </ng-template>
        <span class="folder-name">{{ node.title }}</span>
      </nz-col>
      <nz-col></nz-col>
      <nz-col>
        <nz-tag>导航</nz-tag>
      </nz-col>
    </nz-row>
  </ng-template>
  <nz-dropdown-menu #menu="nzDropdownMenu">
    <ul *ngIf="active" nz-menu>
      <li nz-menu-item>{{ active.title }}</li>
      <li nz-menu-divider></li>
      <li nz-menu-item (click)="openForm(builders.dict[active.key])">编辑</li>
      <li nz-menu-item (click)="delete(builders.dict[active.key])">删除</li>
    </ul>
  </nz-dropdown-menu>
</nz-tree>
