<nz-card>
  <nz-tabset
    style="height: 100%"
    nzTabPosition="left"
    [(nzSelectedIndex)]="tabIndex"
    (nzSelectedIndexChange)="saveTabIndex()"
  >
    <nz-tab nzTitle="Public Email">
      <ng-template #emailRef>
        <button nz-button nzType="text" (click)="setEmail()">
          <span nz-icon nzType="edit"></span>
        </button>
      </ng-template>
      <nz-card nzSize="small" nzType="inner" nzTitle="Basic" [nzExtra]="emailRef">
        <nz-descriptions nzLayout="vertical" [nzColumn]="2">
          <nz-descriptions-item nzTitle="SMTP Host">
            <ng-container *ngIf="values['EmailHost']; else unknown">
              {{ values['EmailHost'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="SMTP Port（SSL）">
            <ng-container *ngIf="values['EmailPort']; else unknown">
              {{ values['EmailPort'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="Username">
            <ng-container *ngIf="values['EmailUsername']; else unknown">
              {{ values['EmailUsername'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="Password">
            <ng-container *ngIf="values['EmailPassword']; else unknown">
              <span>Exists</span>
            </ng-container>
          </nz-descriptions-item>
        </nz-descriptions>
      </nz-card>
    </nz-tab>
    <nz-tab nzTitle="Tencent SMS">
      <ng-template #smsEditTpl>
        <button nz-button nzType="text" (click)="setSms()">
          <span nz-icon nzType="edit"></span>
        </button>
      </ng-template>
      <nz-card nzSize="small" nzType="inner" nzTitle="Basic" [nzExtra]="smsEditTpl">
        <nz-descriptions nzLayout="vertical" [nzColumn]="3">
          <nz-descriptions-item nzTitle="Secret Id">
            <ng-container *ngIf="values['SmsSecretId']; else unknown">
              {{ values['SmsSecretId'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="Secret Key">
            <ng-container *ngIf="values['SmsSecretKey']; else unknown">
              <span>Exists</span>
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="Sign">
            <ng-container *ngIf="values['SmsSign']; else unknown">
              {{ values['SmsSign'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="AppId">
            <ng-container *ngIf="values['SmsAppId']; else unknown">
              {{ values['SmsAppId'] }}
            </ng-container>
          </nz-descriptions-item>
          <nz-descriptions-item nzTitle="Region">
            <ng-container *ngIf="values['SmsRegion']; else unknown">
              {{ values['SmsRegion'] }}
            </ng-container>
          </nz-descriptions-item>
        </nz-descriptions>
      </nz-card>

      <nz-table nzSize="small" nzTemplateMode>
        <thead>
          <tr>
            <th nzWidth="60px"></th>
            <th>Key</th>
            <th>Template</th>
            <th>ID</th>
            <th nzWidth="60px" nzAlign="center">
              <button nz-button type="button" nzType="text" disabled>
                <span nz-icon nzType="setting" nzTheme="outline"></span>
              </button>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let x of smsTpls">
            <td></td>
            <td>
              <b>{{ x.key }}</b>
            </td>
            <td>{{ x.name }}</td>
            <td>
              <ng-container *ngIf="values[x.key]; else unknown">
                {{ values[x.key] }}
              </ng-container>
            </td>
            <td>
              <button nz-button nzType="text" (click)="setSmsTpl(x.key)">
                <span nz-icon nzType="edit"></span>
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </nz-tab>
  </nz-tabset>
</nz-card>

<ng-template #unknown>
  <span>Unset</span>
</ng-template>
