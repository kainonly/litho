<form *ngIf="form" nz-form nzLayout="vertical" id="form" [formGroup]="form" (wpxSubmit)="submit($event)">
  <nz-row [nzGutter]="24">
    <nz-col [nzSpan]="14">
      <nz-form-item>
        <nz-form-label nzRequired>项目名称</nz-form-label>
        <nz-form-control nzHasFeedback [nzAutoTips]="tips.name">
          <input nz-input formControlName="name" placeholder="请输入项目名称" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>有效期</nz-form-label>
        <nz-form-control>
          <nz-date-picker style="width: 100%" formControlName="expire"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>
          <nz-space nzAlign="center">
            <span *nzSpaceItem>OpenAPI 密钥</span>
            <button *nzSpaceItem nz-button type="button" nzType="text" nz-tooltip="重新生成" (click)="generateSecret()">
              <span nz-icon nzType="sync"></span>
            </button>
          </nz-space>
        </nz-form-label>
        <nz-form-control>
          <nz-descriptions nzSize="small" [nzColumn]="1">
            <nz-descriptions-item nzTitle="Secret Id">{{ form.get('secret_id')?.value }}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="Secret Key">{{ form.get('secret_key')?.value }}</nz-descriptions-item>
          </nz-descriptions>
        </nz-form-control>
      </nz-form-item>
    </nz-col>
    <nz-col [nzSpan]="10">
      <nz-form-item>
        <nz-form-label nzRequired> 命名空间 </nz-form-label>
        <nz-form-control nzHasFeedback [nzAutoTips]="tips.namespace">
          <input nz-input formControlName="namespace" placeholder="请输入命名空间" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzRequired>状态</nz-form-label>
        <nz-form-control>
          <nz-switch formControlName="status"></nz-switch>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label>Logo</nz-form-label>
        <nz-form-control>
          <wpx-upload-avatar
            wpxExt="image"
            [wpxAccept]="['image/jpeg', 'image/png']"
            [wpxFallback]="['assets', 'photon.svg'] | wpxAssets"
            formControlName="logo"
          >
          </wpx-upload-avatar>
        </nz-form-control>
      </nz-form-item>
    </nz-col>
  </nz-row>
</form>

<div *nzModalFooter>
  <button nz-button type="button" nzType="default" (click)="close()">取消</button>
  <button nz-button nzType="primary" form="form" [disabled]="!form.valid">提交</button>
</div>
