<nz-space>
  <button *nzSpaceItem type="button" nz-button (click)="openView()">
    <i nz-icon nzType="import"></i>
    <span i18n>导入</span>
  </button>
  <button *nzSpaceItem type="button" nz-button nzType="link" [disabled]="values?.length === 0" (click)="openSort()">
    <i nz-icon nzType="sort-descending"></i>
    <span i18n>排序</span>
  </button>
</nz-space>

<nz-list nzGrid style="padding: 1em 0">
  <nz-row [nzGutter]="[8, 8]">
    <nz-col [nzSpan]="6" *ngFor="let x of values; index as i">
      <nz-list-item>
        <nz-card nzSize="small" [nzBorderless]="false">
          <nz-row nzJustify="space-between" nzAlign="middle">
            <nz-col>
              <div class="meta">
                <ng-container [ngSwitch]="wpxType">
                  <ng-container *ngSwitchCase="'pictures'">
                    <ng-container *ngIf="x.includes('?'); else notQueryTpl">
                      <img
                        (click)="preview(x)"
                        nz-image
                        nzDisablePreview
                        [nzSrc]="[x] | wpxAssets : option.style.processed.thumbnail"
                        [nzPlaceholder]="[x] | wpxAssets : option.style.processed.placeholder"
                        [alt]="x"
                      />
                    </ng-container>
                    <ng-template #notQueryTpl>
                      <img
                        (click)="preview(x)"
                        nz-image
                        nzDisablePreview
                        [nzSrc]="[x] | wpxAssets : option.style.default.thumbnail"
                        [nzPlaceholder]="[x] | wpxAssets : option.style.default.placeholder"
                        [alt]="x"
                      />
                    </ng-template>
                  </ng-container>
                  <ng-container *ngSwitchCase="'videos'">
                    <img
                      (click)="video(x)"
                      nz-image
                      nzDisablePreview
                      [nzSrc]="[x + '_chart'] | wpxAssets : option.style.default.thumbnail"
                      [alt]="x"
                    />
                  </ng-container>
                </ng-container>
              </div>
            </nz-col>
            <nz-col></nz-col>
            <nz-col>
              <a target="_blank" [href]="[x] | wpxAssets" nz-button nzType="text" nz-tooltip="下载" i18n-nz-tooltip>
                <i nz-icon nzType="download"></i>
              </a>
              <button nz-button nzType="text" nz-tooltip="移除" i18n-nz-tooltip (click)="removeValue(i)">
                <i nz-icon nzType="delete"></i>
              </button>
            </nz-col>
          </nz-row>
        </nz-card>
      </nz-list-item>
    </nz-col>
  </nz-row>
</nz-list>

<nz-drawer
  nzTitle="排序"
  i18n-nzTitle
  [nzVisible]="sortVisible"
  nzPlacement="right"
  [nzWidth]="420"
  (nzOnClose)="closeSort()"
>
  <ng-container *nzDrawerContent>
    <nz-list cdkDropList (cdkDropListDropped)="sort($event)">
      <nz-list-item *ngFor="let x of values" cdkDrag>
        <div class="drag-placeholder" *cdkDragPlaceholder></div>
        <div class="meta meta-small">
          <ng-container [ngSwitch]="wpxType">
            <ng-container *ngSwitchCase="'pictures'">
              <img nz-image nzDisablePreview [nzSrc]="[x, 'thumbnail'] | wpxAssets" [alt]="x" />
            </ng-container>
            <ng-container *ngSwitchCase="'videos'">
              <img nz-image nzDisablePreview [nzSrc]="[x + '_chart'] | wpxAssets" [alt]="x" />
            </ng-container>
          </ng-container>
        </div>
        <ul nz-list-item-actions>
          <nz-list-item-action>
            <button cdkDragHandle nzShape="circle" nz-button nzType="dashed"><i nz-icon nzType="drag"></i></button>
          </nz-list-item-action>
        </ul>
      </nz-list-item>
    </nz-list>
  </ng-container>
</nz-drawer>
